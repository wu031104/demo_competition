{% extends "new_layout_2.html" %}
{% load static %}
{% block css %}

    <link href="../static/css/bootstrap.min.css?v=3.4.0" rel="stylesheet">
    <link href="../static/font-awesome/css/font-awesome.css?v=4.3.0" rel="stylesheet">


    <!-- Data Tables -->
    <link href="../static/css/plugins/dataTables/dataTables.bootstrap.css" rel="stylesheet">
    <!-- Morris -->
    {#    <link href="css/plugins/morris/morris-0.4.3.min.css" rel="stylesheet">#}

    <link href="../static/css/animate.css" rel="stylesheet">
    <link href="../static/css/style.css?v=2.2.0" rel="stylesheet">



{% endblock %}
{% block content %}

    <div class="row wrapper border-bottom white-bg page-heading">
        <div class="col-sm-4">
            <h2>情感分析</h2>
        </div>
    </div>
    <div>
        <div class="col-lg-7">
            <div class="wrapper wrapper-content">
                <div class="row animated fadeInRight">
                    <div class="ibox float-e-margins">
                        <div class="ibox float-e-margins">
                            <div class="ibox-title">
                                <h5>数据总览</h5>
                                <div class="ibox-tools">
                                    <a class="collapse-link ui-sortable">
                                        <i class="fa fa-chevron-up"></i>
                                    </a>
                                    <a class="dropdown-toggle" data-toggle="dropdown" href="index.html#">
                                        <i class="fa fa-wrench"></i>
                                    </a>
                                    <ul class="dropdown-menu dropdown-user">
                                        <li><a href="index.html#">选项1</a>
                                        </li>
                                        <li><a href="index.html#">选项2</a>
                                        </li>
                                    </ul>
                                    <a class="close-link">
                                        <i class="fa fa-times"></i>
                                    </a>
                                </div>
                            </div>
                            <div class="ibox-content" style="display: block;">
                                <div class="ui-sortable">
                                    <h2>信息分析统计</h2>
                                    <ul class="list-group clear-list m-t">
                                        {% for obj in huati_add_5 %}

                                            <li class="list-group-item fist-item" style="height:70px;font-size:32px;">
                                                <span class="label label-success" style="font-size:32px;">1</span>
                                                <span>&nbsp情感指数&nbsp:&nbsp</span>&nbsp0.87
                                            </li>
                                            <li class="list-group-item" style="height:70px;font-size:32px;">
{#                                                <span class="label label-info" style="font-size:32px;">2</span> &nbsp;检测发帖&nbsp;：{{ obj.all_add }}&nbsp;条#}
                                                <span class="label label-info" style="font-size:32px;">2</span> &nbsp;检测发帖&nbsp;：14320&nbsp;条
                                            </li>
                                            <li class="list-group-item" style="height:70px;font-size:32px;">
                                                <span class="label label-warning" style="font-size:32px;">3</span>
{#                                                &nbsp;积极帖数&nbsp;：{{ obj.jiji_add }}&nbsp;条#}
                                                &nbsp;积极帖数&nbsp;：8739&nbsp;条
                                            </li>
                                            <li class="list-group-item" style="height:70px;font-size:32px;">
                                                <span class="label label-primary" style="font-size:32px;">4</span>
{#                                                &nbsp;中性帖数&nbsp;：{{ obj.zhongxing_add }}&nbsp;条#}
                                                &nbsp;中性帖数&nbsp;：1432&nbsp;条
                                            </li>
                                            <li class="list-group-item" style="height:70px;font-size:32px;">
                                                <span class="label label-default" style="font-size:32px;">5</span>
{#                                                &nbsp;消极帖数&nbsp;：{{ obj.xiaoji_add }}&nbsp;条#}
                                                &nbsp;消极帖数&nbsp;：4149&nbsp;条
                                            </li>
                                        {% endfor %}
                                    </ul>
                                    {#                                    <div style="height: 120px" id="bing"></div>#}
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        {#    --------------------------------------------------------------------------------#}
        <div class="col-lg-5">
            <div class="wrapper wrapper-content">
                <div class="ibox float-e-margins">
                    <div class="ibox-title">
                        <h5>热点话题-词云展示</h5>
                        <div class="ibox-tools">
                            <a class="collapse-link">
                                <i class="fa fa-chevron-up"></i>
                            </a>
                            <a class="dropdown-toggle" data-toggle="dropdown" href="tabs_panels.html#">
                                <i class="fa fa-wrench"></i>
                            </a>
                            <ul class="dropdown-menu dropdown-user">
                                <li><a href="tabs_panels.html#">选项1</a>
                                </li>
                                <li><a href="tabs_panels.html#">选项2</a>
                                </li>
                            </ul>
                            <a class="close-link">
                                <i class="fa fa-times"></i>
                            </a>
                        </div>
                    </div>
                    <div class="ibox-content">
                        <div class="item">
                            <img alt="image" class="img-responsive" src="../static/img_new/huati_word_clouds.png"
                                 style="width:500px;height:411px">
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    {#    -------------------------------------------------------------------------------------------------#}



    <div class="row">
        <div class="col-lg-7">
            <div class="ibox float-e-margins">
                <div class="ibox-title">
                    <h5>各地区情感分析指数</h5>
                    <div class="ibox-tools">
                        <a class="collapse-link">
                            <i class="fa fa-chevron-up"></i>
                        </a>
                        <a class="dropdown-toggle" data-toggle="dropdown" href="graph_flot.html#">
                            <i class="fa fa-wrench"></i>
                        </a>
                        <ul class="dropdown-menu dropdown-user">
                            <li><a href="graph_flot.html#">选项1</a>
                            </li>
                            <li><a href="graph_flot.html#">选项2</a>
                            </li>
                        </ul>
                        <a class="close-link">
                            <i class="fa fa-times"></i>
                        </a>
                    </div>
                </div>
                <div class="ibox-content">
                    <div style="height:600px" id="echarts-map-chart"></div>
                </div>
            </div>
        </div>
        <div class="col-lg-5">
            <div class="ibox float-e-margins">
                <div class="ibox-title">
                    <h5>近一周话题情感统计</h5>
                    <div class="ibox-tools">
                        <a class="collapse-link">
                            <i class="fa fa-chevron-up"></i>
                        </a>
                        <a class="dropdown-toggle" data-toggle="dropdown" href="graph_flot.html#">
                            <i class="fa fa-wrench"></i>
                        </a>
                        <ul class="dropdown-menu dropdown-user">
                            <li><a href="graph_flot.html#">选项1</a>
                            </li>
                            <li><a href="graph_flot.html#">选项2</a>
                            </li>
                        </ul>
                        <a class="close-link">
                            <i class="fa fa-times"></i>
                        </a>
                    </div>
                </div>
                <div class="ibox-content">
                    <div style="height:600px" id="main1"></div>

                    <script type="text/javascript"
                            src="https://fastly.jsdelivr.net/npm/echarts@5.4.2/dist/echarts.min.js"></script>


                    <script type="text/javascript">
                        var dom = document.getElementById('main1');
                        var myChart = echarts.init(dom, null, {
                            renderer: 'canvas',
                            useDirtyRect: false
                        });
                        var app = {};

                        var option;

                        option = {
                            title: {
                                text: '微博情感分类',
                                {#subtext: 'Fake Data',#}
                                left: 'center'
                            },
                            tooltip: {
                                trigger: 'item'
                            },
                            legend: {
                                orient: 'vertical',
                                left: 'left'
                            },
                            series: [
                                {
                                    color: ['rgba(239,101,103,0.89)', '#f9c956', '#91cd77'],
                                    name: '话题情感',
                                    type: 'pie',
                                    radius: '50%',
                                    data: [
                                        {% for obj in huati_add_5 %}
                                            {value: {{ obj.jiji_add|safe}}, name: '积极'},
                                            {value: {{ obj.zhongxing_add|safe}}, name: '中性'},
                                            {value: {{ obj.xiaoji_add|safe}}, name: '消极'},
                                        {% endfor %}
                                    ],
                                    emphasis: {
                                        itemStyle: {
                                            shadowBlur: 10,
                                            shadowOffsetX: 0,
                                            {#shadowColor: 'rgba(0, 0, 0, 0.5)',#}
                                        }
                                    },
                                }
                            ]
                        };

                        if (option && typeof option === 'object') {
                            myChart.setOption(option);
                        }

                        window.addEventListener('resize', myChart.resize);
                    </script>
                </div>
            </div>
        </div>
    </div>



    <div class="row">
        <div class="col-lg-7">
            <div class="ibox float-e-margins">
                <div class="ibox-title">
                    <h5>各分类话题——情感统计</h5>
                    <div class="ibox-tools">
                        <a class="collapse-link">
                            <i class="fa fa-chevron-up"></i>
                        </a>
                        <a class="dropdown-toggle" data-toggle="dropdown" href="graph_flot.html#">
                            <i class="fa fa-wrench"></i>
                        </a>
                        <ul class="dropdown-menu dropdown-user">
                            <li><a href="graph_flot.html#">选项1</a>
                            </li>
                            <li><a href="graph_flot.html#">选项2</a>
                            </li>
                        </ul>
                        <a class="close-link">
                            <i class="fa fa-times"></i>
                        </a>
                    </div>
                </div>
                <div class="ibox-content">
                    <div style="height:430px" id="main2"></div>
                    <script type="text/javascript"
                            src="https://fastly.jsdelivr.net/npm/echarts@5.4.2/dist/echarts.min.js"></script>

                    <script type="text/javascript">
                        var dom = document.getElementById('main2');
                        var myChart = echarts.init(dom, null, {
                            renderer: 'canvas',
                            useDirtyRect: false
                        });
                        var app = {};

                        var option;

                        option = {
                            legend: {},
                            tooltip: {},
                            dataset: {
                                dimensions: ['product', '积极', '中性', '消极'],
                                source: [
                                    {% for obj in huati_add_5 %}
                                        {
                                            product: '美食旅游',
                                            '积极': 3212,
                                            '中性':1233,
                                            '消极': 632
                                        },
                                        {
                                            product: '体育赛事',
                                            '积极': 4131,
                                            '中性': 4123,
                                            '消极': 1123
                                        },
                                        {
                                            product: '社会热点',
                                            '积极': 7453,
                                            '中性': 2344,
                                            '消极': 2131
                                        },
                                        {
                                            product: '明星八卦',
                                            '积极': 5432,
                                            '中性': 1231,
                                            '消极': 5422
                                        },
                                        {
                                            product: '热门综艺',
                                            '积极': 3231,
                                            '中性': 1231,
                                            '消极': 2432
                                        }
                                    {% endfor %}
                                ]
                            },
                            xAxis: {type: 'category'},
                            yAxis: {},
                            series: [
                                {type: 'bar', color: '#F08080'},
                                {type: 'bar', color: '#f9c956'},
                                {type: 'bar', color: '#ADD8E6'}
                            ]
                        };

                        if (option && typeof option === 'object') {
                            myChart.setOption(option);
                        }

                        window.addEventListener('resize', myChart.resize);
                    </script>
                </div>
            </div>
        </div>
        <div class="col-lg-5">
            <div class="ibox float-e-margins">
                <div class="ibox-title">
                    <h5>各分类话题——情感指数</h5>
                    <div class="ibox-tools">
                        <a class="collapse-link">
                            <i class="fa fa-chevron-up"></i>
                        </a>
                        <a class="dropdown-toggle" data-toggle="dropdown" href="graph_flot.html#">
                            <i class="fa fa-wrench"></i>
                        </a>
                        <ul class="dropdown-menu dropdown-user">
                            <li><a href="graph_flot.html#">选项1</a>
                            </li>
                            <li><a href="graph_flot.html#">选项2</a>
                            </li>
                        </ul>
                        <a class="close-link">
                            <i class="fa fa-times"></i>
                        </a>
                    </div>
                </div>
                <div class="ibox-content">
                    <div style="height:430px" id="main3"></div>

                </div>
            </div>
        </div>
    </div>


    <div class="row">
        <div class="col-lg-12"></div>
        <div class="footer">
            <div>
                <strong>面向微博超话的情感检测系统</strong>
                <!--——————————————————————    最底下的那一行字——————————————————————————    -->
            </div>
        </div>
    </div>
{% endblock %}


{% block js %}
    <!-- Mainly scripts -->
    <script src="../static/js/jquery-2.1.1.min.js"></script>
    <script src="../static/js/bootstrap.min.js?v=3.4.0"></script>
    <script src="../static/js/plugins/metisMenu/jquery.metisMenu.js"></script>
    <script src="../static/js/plugins/slimscroll/jquery.slimscroll.min.js"></script>

    <script src="../static/js/plugins/jeditable/jquery.jeditable.js"></script>

    <script src="../static/js/plugins/morris/raphael-2.1.0.min.js"></script>
    <script src="../static/js/plugins/morris/morris.js"></script>

    <!-- Data Tables -->
    <script src="../static/js/plugins/dataTables/jquery.dataTables.js"></script>
    <script src="../static/js/plugins/dataTables/dataTables.bootstrap.js"></script>

    <!-- Custom and plugin javascript -->
    <script src="../static/js/hplus.js?v=2.2.0"></script>
    <script src="../static/js/plugins/pace/pace.min.js"></script>

    <!-- ECharts -->
    <script src="../static/js/plugins/echarts/echarts-all.js"></script>


    <script>
        $(function () {

            var radarChart = echarts.init(document.getElementById("main3"));
            var radaroption = {
                title: {
                    text: '情感指数展示图',
                    subtext: ''
                },
                tooltip: {
                    trigger: 'axis'
                },
                legend: {
                    orient: 'vertical',
                    x: 'right',
                    y: 'bottom',
                    data: ['平均情感指数']
                },
                polar: [
                    {
                        indicator: [
                            {text: '热门综艺', max: 1},
                            {text: '明星八卦', max: 1},
                            {text: '社会热点', max: 1},
                            {text: '体育赛事', max: 1},
                            {text: '美食旅游', max: 1},
                        ]
                    }
                ],
                calculable: true,
                series: [
                    {
                        {#name: '',#}
                        type: 'radar',
                        data: [
                            {
                                value: [0.7654, 0.6232, 0.8245, 0.7747, 0.8764],
                                name: '平均情感指数'
                            }
                        ]
                    }
                ]
            };

            radarChart.setOption(radaroption);

        });
    </script>

    <script>
        $(function () {


            var mapChart = echarts.init(document.getElementById("echarts-map-chart"));
            var mapoption = {
                title: {
                    text: '各地区情感分析指数',
                    // {#subtext: '今日',#}
                    x: 'center'
                },
                tooltip: {
                    trigger: 'item'
                },
                legend: {
                    orient: 'vertical',
                    x: 'left',
                    data: ['情感指数']
                },
                dataRange: {
                    min: 0.5,
                    max: 1,
                    x: 'left',
                    y: 'bottom',
                    text: ['高', '低'],           // 文本，默认为数值文本
                    calculable: true
                },
                toolbox: {
                    show: true,
                    orient: 'vertical',
                    x: 'right',
                    y: 'center',
                    feature: {
                        mark: {show: true},
                        dataView: {show: true, readOnly: false},
                        restore: {show: true},
                        saveAsImage: {show: true}
                    }
                },
                roamController: {
                    show: true,
                    x: 'right',
                    mapTypeControl: {
                        'china': true
                    }
                },
                series: [
                    {
                        name: '情感指数',
                        type: 'map',
                        mapType: 'china',
                        roam: false,
                        itemStyle: {
                            normal: {label: {show: true}},
                            emphasis: {label: {show: true}}
                        },
                        data: [
                            {name: '北京', value: 0.8925},
                            {name: '天津', value: 0.9034},
                            {name: '上海', value: 0.8256},
                            {name: '重庆', value: 0.8313},
                            {name: '河北', value: 0.8545},
                            {name: '河南', value: 0.7813},
                            {name: '云南', value: 0.6624},
                            {name: '辽宁', value: 0.9045},
                            {name: '黑龙江', value: 0.6227},
                            {name: '湖南', value: 0.8189},
                            {name: '安徽', value: 0.8355},
                            {name: '山东', value: 0.7824},
                            {name: '新疆', value: 0.7826},
                            {name: '江苏', value: 0.8543},
                            {name: '浙江', value: 0.8325},
                            {name: '江西', value: 0.8486},
                            {name: '湖北', value: 0.8613},
                            {name: '广西', value: 0.8113},
                            {name: '甘肃', value: 0.6468},
                            {name: '山西', value: 0.8622},
                            {name: '内蒙古', value: 0.8135},
                            {name: '陕西', value: 0.8519},
                            {name: '吉林', value: 0.8716},
                            {name: '福建', value: 0.6232},
                            {name: '贵州', value: 0.7317},
                            {name: '广东', value: 0.7521},
                            {name: '青海', value: 0.8316},
                            {name: '西藏', value: 0.7275},
                            {name: '四川', value: 0.8113},
                            {name: '宁夏', value: 0.8456},
                            {name: '海南', value: 0.7124},
                            {name: '台湾', value: 0.8187},
                            {name: '香港', value: 0.8514},
                            {name: '澳门', value: 0.7832}
                        ]
                    },
                ]
            };
            mapChart.setOption(mapoption);
        });
    </script>
    <script>
        $(document).ready(function () {
            $('.chart').easyPieChart({
                barColor: '#f8ac59',
                //                scaleColor: false,
                scaleLength: 5,
                lineWidth: 4,
                size: 80
            });

            $('.chart2').easyPieChart({
                barColor: '#1c84c6',
                //                scaleColor: false,
                scaleLength: 5,
                lineWidth: 4,
                size: 80
            });

            var d1 = [
                [1262304000000, 1],
                [1264982400000, 100],
                [1267401600000, 1],
                [1270080000000, 200],
                [1272672000000, 1],
                [1275350400000, 100],
                [1277942400000, 1],
                [1280620800000, 300]
            ];
            var d2 = [
                [1262304000000, 100],
                [1264982400000, 1],
                [1267401600000, 150],
                [1270080000000, 1],
                [1272672000000, 230],
                [1275350400000, 1],
                [1277942400000, 150],
                [1280620800000, 10]
            ];

            var data3 = [
                {
                    label: "Data 1",
                    data: d1,
                    color: '#23c6c8'
                },
                {
                    label: "Data 2",
                    data: d2,
                    color: '#1ab394'
                }
            ];
            $.plot($("#flot-chart3"), data3, {
                xaxis: {
                    tickDecimals: 0
                },
                series: {
                    lines: {
                        show: true,
                        fill: true,
                        fillColor: {
                            colors: [{
                                opacity: 1
                            }, {
                                opacity: 1
                            }]
                        },
                    },
                    curvedLines: {
                        active: true,
                        fit: true,
                        apply: true
                    },
                    points: {
                        width: 0.1,
                        show: false
                    },
                },
                grid: {
                    show: false,
                    borderWidth: 0
                },
                legend: {
                    show: false,
                }
            });


            var mapData = {
                "US": 298,
                "SA": 200,
                "DE": 220,
                "FR": 540,
                "CN": 120,
                "AU": 760,
                "BR": 550,
                "IN": 200,
                "GB": 120,
            };

            $('#world-map').vectorMap({
                map: 'world_mill_en',
                backgroundColor: "transparent",
                regionStyle: {
                    initial: {
                        fill: '#e4e4e4',
                        "fill-opacity": 0.9,
                        stroke: 'none',
                        "stroke-width": 0,
                        "stroke-opacity": 0
                    }
                },

                series: {
                    regions: [{
                        values: mapData,
                        scale: ["#1ab394", "#22d6b1"],
                        normalizeFunction: 'polynomial'
                    }]
                },
            });
        });
    </script>


{% endblock %}
